services:
  - type: web
    name: petit-prof-site
    env: static
    buildCommand: |
      chmod +x render-build.sh
      ./render-build.sh
      # V√©rification finale de la structure
      echo "üîç V√©rification finale de la structure..."
      find . -type f -name "*.css" -o -name "*.js" -o -name "*.html" | head -10
      echo "üìÅ Structure des dossiers :"
      ls -la
      echo "üìÅ Contenu du dossier CSS :"
      ls -la css/ 2>/dev/null || echo "‚ùå Dossier CSS non trouv√©"
      echo "üìÅ Contenu du dossier JS :"
      ls -la js/ 2>/dev/null || echo "‚ùå Dossier JS non trouv√©"
      echo "üìÅ Contenu du dossier Images :"
      ls -la images/ 2>/dev/null || echo "‚ùå Dossier Images non trouv√©"
    startCommand: echo "Site statique d√©ploy√© avec succ√®s"
    staticPublishPath: .
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
    headers:
      # En-t√™tes g√©n√©raux
      - path: /*
        name: Cache-Control
        value: "public, max-age=31536000"
      
      # En-t√™tes sp√©cifiques par type de fichier
      - path: /*.css
        name: Content-Type
        value: "text/css"
      - path: /*.js
        name: Content-Type
        value: "application/javascript"
      - path: /*.html
        name: Content-Type
        value: "text/html"
      
      # En-t√™tes pour les images
      - path: /*.png
        name: Content-Type
        value: "image/png"
      - path: /*.jpg
        name: Content-Type
        value: "image/jpeg"
      - path: /*.webp
        name: Content-Type
        value: "image/webp"
      - path: /*.avif
        name: Content-Type
        value: "image/avif"
      - path: /*.svg
        name: Content-Type
        value: "image/svg+xml"
      
      # En-t√™tes pour les documents
      - path: /*.pdf
        name: Content-Type
        value: "application/pdf"
      
      # En-t√™tes sp√©cifiques pour les sous-dossiers
      - path: css/*
        name: Content-Type
        value: "text/css"
      - path: js/*
        name: Content-Type
        value: "application/javascript"
      - path: images/*
        name: Cache-Control
        value: "public, max-age=31536000"
      
      # En-t√™tes de s√©curit√©
      - path: /*
        name: X-Content-Type-Options
        value: "nosniff"
      - path: /*
        name: X-Frame-Options
        value: "DENY"
      - path: /*
        name: X-XSS-Protection
        value: "1; mode=block"
