document.addEventListener('DOMContentLoaded',function(){const hamburger=document.querySelector('.hamburger');const navMenu=document.querySelector('.nav-menu');hamburger.addEventListener('click',function(){hamburger.classList.toggle('active');navMenu.classList.toggle('active');if (window.innerWidth<=768){navMenu.classList.toggle('mobile-active');}});document.querySelectorAll('.nav-link:not(.dropdown .nav-link)').forEach(link=>{link.addEventListener('click',()=>{hamburger.classList.remove('active');navMenu.classList.remove('active');navMenu.classList.remove('mobile-active');});});const dropdownToggle=document.querySelector('.dropdown .nav-link');const dropdown=document.querySelector('.dropdown');if (dropdownToggle&&dropdown){dropdownToggle.addEventListener('click',function(e){if (window.getComputedStyle(hamburger).display==='flex'){e.preventDefault();dropdown.classList.toggle('active');}});}document.querySelectorAll('.dropdown-menu a').forEach(link=>{link.addEventListener('click',()=>{hamburger.classList.remove('active');navMenu.classList.remove('active');navMenu.classList.remove('mobile-active');if (dropdown) dropdown.classList.remove('active');});});document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function (e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if (target){const offsetTop=target.offsetTop-70;window.scrollTo({top:offsetTop,behavior:'smooth'});}});});const sections=document.querySelectorAll('section[id]');const navLinks=document.querySelectorAll('.nav-link');function updateActiveNavLink(){let current='';sections.forEach(section=>{const sectionTop=section.offsetTop-100;const sectionHeight=section.clientHeight;if (window.scrollY>=sectionTop&&window.scrollY<sectionTop+sectionHeight){current=section.getAttribute('id');}});navLinks.forEach(link=>{link.classList.remove('active');if (link.getAttribute('href')===`#${current}`){link.classList.add('active');}});}window.addEventListener('scroll',updateActiveNavLink);const observerOptions={threshold:0.1,rootMargin:'0px 0px-50px 0px'};const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{if (entry.isIntersecting){entry.target.classList.add('animate-in');}});},observerOptions);document.querySelectorAll('.section-card,.niveau-card,.video-card').forEach(el=>{observer.observe(el);});const contactForm=document.getElementById('contactForm');if (contactForm){contactForm.addEventListener('submit',function(e){e.preventDefault();const formData=new FormData(this);const nom=formData.get('nom');const email=formData.get('email');const sujet=formData.get('sujet');const message=formData.get('message');if (!nom||!email||!sujet||!message){showNotification('Veuillez remplir tous les champs','error');return;}if (!isValidEmail(email)){showNotification('Veuillez entrer une adresse email valide','error');return;}showNotification('Envoi en cours...','info');setTimeout(()=>{showNotification('Message envoy√© avec succ√®s !','success');this.reset();},2000);});}function isValidEmail(email){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email);}function showNotification(message,type='info'){const existingNotifications=document.querySelectorAll('.notification');existingNotifications.forEach(notif=>notif.remove());const notification=document.createElement('div');notification.className=`notification notification-${type}`;notification.innerHTML=`<div class="notification-content"><span class="notification-message">${message}</span><button class="notification-close">&times;</button></div>`;document.body.appendChild(notification);setTimeout(()=>{notification.classList.add('show');},100);setTimeout(()=>{notification.classList.remove('show');setTimeout(()=>{notification.remove();},300);},5000);notification.querySelector('.notification-close').addEventListener('click',()=>{notification.classList.remove('show');setTimeout(()=>{notification.remove();},300);});}let lastScrollTop=0;const navbar=document.querySelector('.navbar');window.addEventListener('scroll',function(){const scrollTop=window.pageYOffset||document.documentElement.scrollTop;if (scrollTop>lastScrollTop&&scrollTop>100){navbar.style.transform='translateY(-100%)';}else{navbar.style.transform='translateY(0)';}lastScrollTop=scrollTop;});function animateCounters(){const counters=document.querySelectorAll('.counter');counters.forEach(counter=>{const target=parseInt(counter.getAttribute('data-target'));const duration=2000;const increment=target/(duration/16);let current=0;const updateCounter=()=>{current+=increment;if (current<target){counter.textContent=Math.floor(current);requestAnimationFrame(updateCounter);}else{counter.textContent=target;}};updateCounter();});}if ('IntersectionObserver' in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if (entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.remove('lazy');imageObserver.unobserve(img);}});});document.querySelectorAll('img[data-src]').forEach(img=>{imageObserver.observe(img);});}const backToTopButton=document.createElement('button');backToTopButton.innerHTML='‚Üë';backToTopButton.className='back-to-top';backToTopButton.title='Retour en haut';document.body.appendChild(backToTopButton);window.addEventListener('scroll',function(){if (window.pageYOffset>300){backToTopButton.classList.add('show');}else{backToTopButton.classList.remove('show');}});backToTopButton.addEventListener('click',function(){window.scrollTo({top:0,behavior:'smooth'});});function preloadResources(){const fontLink=document.createElement('link');fontLink.rel='preload';fontLink.href='https:fontLink.as='style';document.head.appendChild(fontLink);const faLink=document.createElement('link');faLink.rel='preload';faLink.href='https:faLink.as='style';document.head.appendChild(faLink);}preloadResources();window.addEventListener('error',function(e){console.error('Erreur JavaScript:',e.error);showNotification('Une erreur est survenue. Veuillez rafra√Æchir la page.','error');});if ('performance' in window){window.addEventListener('load',function(){setTimeout(()=>{const perfData=performance.getEntriesByType('navigation')[0];if (perfData){console.log('Temps de chargement:',perfData.loadEventEnd-perfData.loadEventStart,'ms');}},0);});}document.addEventListener('keydown',function(e){if (e.key==='Tab'){document.body.classList.add('keyboard-navigation');}});document.addEventListener('mousedown',function(){document.body.classList.remove('keyboard-navigation');});console.log('üöÄ Site Petit Prof initialis√© avec succ√®s !');setTimeout(()=>{document.body.classList.add('loaded');},100);});function formatNumber(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");}function validateForm(formElement){const inputs=formElement.querySelectorAll('input[required],textarea[required]');let isValid=true;inputs.forEach(input=>{if (!input.value.trim()){input.classList.add('error');isValid=false;}else{input.classList.remove('error');}});return isValid;}function clearForm(formElement){formElement.reset();formElement.querySelectorAll('.error').forEach(input=>{input.classList.remove('error');});}document.addEventListener('DOMContentLoaded',function(){if ('IntersectionObserver' in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if (entry.isIntersecting){const img=entry.target;if (img.dataset.src){img.src=img.dataset.src;img.removeAttribute('data-src');}img.classList.add('loaded');observer.unobserve(img);}});});const lazyImages=document.querySelectorAll('img[loading="lazy"]');lazyImages.forEach(img=>{img.classList.add('lazy-image');imageObserver.observe(img);});console.log(`Lazy loading activ√© pour ${lazyImages.length}images`);}else{console.log('Intersection Observer non support√©,fallback au lazy loading natif');}});function forceLoadImage(imgElement){if (imgElement.dataset.src){imgElement.src=imgElement.dataset.src;imgElement.removeAttribute('data-src');imgElement.classList.add('loaded');}}